use std::{fmt::Debug, hash::Hash, hint::unreachable_unchecked};

use gxhash::{HashMap, HashMapExt};

const MAX_DIGITS: usize = 12;

#[derive(PartialEq, Eq, Clone, Copy, Debug)]
struct Digits {
    digits: [u8; MAX_DIGITS],
}

impl Hash for Digits {
    fn hash<H: std::hash::Hasher>(&self, state: &mut H) {
        state.write(&self.digits);
    }
}

impl Digits {
    fn length(&self) -> usize {
        let opt = self.digits.iter().rposition(|i| *i != 0).map(|l| l + 1);
        unsafe { opt.unwrap_unchecked() }
    }

    fn flip_zero_one(&mut self) -> bool {
        let zero = self.is_zero();
        if zero {
            self.digits[0] = 1;
        }
        zero
    }

    fn even_length(&self) -> bool {
        self.length() % 2 == 0
    }

    fn new(mut n: u64) -> Self {
        let mut digits = [0; MAX_DIGITS];
        for d in &mut digits {
            *d = (n % 10) as u8;
            n /= 10;
        }
        Digits { digits }
    }

    fn split(&mut self) -> Self {
        let mut digits = [0; MAX_DIGITS];
        let middle: usize = self.length() / 2;
        digits[..middle].copy_from_slice(&self.digits[middle..(middle + middle)]);
        for i in 0..middle {
            self.digits[i + middle] = 0;
        }
        Digits { digits }
    }

    fn multiply(&mut self, n: u64) {
        let mut carry = 0;
        for d in &mut self.digits {
            carry += (*d as u64) * n;

            *d = (carry % 10) as u8;
            carry /= 10;
        }
    }

    fn is_zero(&self) -> bool {
        self.digits.iter().all(|i| *i == 0)
    }

    fn single_digit(&self) -> bool {
        self.length() <= 1
    }
}

fn blink_len_old(x: &mut Digits, times: u8, cache: &mut HashMap<(Digits, u8), u64>) -> u64 {
    if times == 0 {
        return 1;
    } else if x.single_digit() {
        let digit = x.digits[0];
        return lookup(digit, times);
    }
    let key = (*x, times);
    let entry = cache.get(&key);
    if let Some(e) = entry {
        return *e;
    }

    if times == 1 {
        return if x.even_length() { 2 } else { 1 };
    }

    let r = if x.even_length() {
        let mut other: Digits = x.split();
        blink_len_old(&mut other, times - 1, cache) + blink_len_old(x, times - 1, cache)
    } else {
        x.multiply(2024);
        blink_len_old(x, times - 1, cache)
    };
    cache.insert(key, r);
    r
}

pub fn part1(input: &str) -> u64 {
    let mut cache = HashMap::new();
    input
        .split(' ')
        .map(|s| s.parse().unwrap())
        .map(|n| {
            let mut num = Digits::new(n);

            blink_len_old(&mut num, 25, &mut cache)
        })
        .sum()
}

pub fn part2(input: &str) -> u64 {
    let mut cache = HashMap::new();
    input
        .split(' ')
        .map(|s| s.parse().unwrap())
        .map(|n| {
            let mut num = Digits::new(n);

            blink_len_old(&mut num, 75, &mut cache)
        })
        .sum()
}

fn lookup(start: u8, times: u8) -> u64 {
    match (start, times) {
        (0, 0) => 1,
        (0, 1) => 1,
        (0, 2) => 1,
        (0, 3) => 2,
        (0, 4) => 4,
        (0, 5) => 4,
        (0, 6) => 7,
        (0, 7) => 14,
        (0, 8) => 16,
        (0, 9) => 20,
        (0, 10) => 39,
        (0, 11) => 62,
        (0, 12) => 81,
        (0, 13) => 110,
        (0, 14) => 200,
        (0, 15) => 328,
        (0, 16) => 418,
        (0, 17) => 667,
        (0, 18) => 1059,
        (0, 19) => 1546,
        (0, 20) => 2377,
        (0, 21) => 3572,
        (0, 22) => 5602,
        (0, 23) => 8268,
        (0, 24) => 12343,
        (0, 25) => 19778,
        (0, 26) => 29165,
        (0, 27) => 43726,
        (0, 28) => 67724,
        (0, 29) => 102131,
        (0, 30) => 156451,
        (0, 31) => 234511,
        (0, 32) => 357632,
        (0, 33) => 549949,
        (0, 34) => 819967,
        (0, 35) => 1258125,
        (0, 36) => 1916299,
        (0, 37) => 2886408,
        (0, 38) => 4414216,
        (0, 39) => 6669768,
        (0, 40) => 10174278,
        (0, 41) => 15458147,
        (0, 42) => 23333796,
        (0, 43) => 35712308,
        (0, 44) => 54046805,
        (0, 45) => 81997335,
        (0, 46) => 125001266,
        (0, 47) => 189148778,
        (0, 48) => 288114305,
        (0, 49) => 437102505,
        (0, 50) => 663251546,
        (0, 51) => 1010392024,
        (0, 52) => 1529921658,
        (0, 53) => 2327142660,
        (0, 54) => 3537156082,
        (0, 55) => 5362947711,
        (0, 56) => 8161193535,
        (0, 57) => 12380334344,
        (0, 58) => 18810542532,
        (0, 59) => 28593873985,
        (0, 60) => 43369895096,
        (0, 61) => 65961219181,
        (0, 62) => 100139236592,
        (0, 63) => 152044639077,
        (0, 64) => 231153279853,
        (0, 65) => 350788203951,
        (0, 66) => 533109439771,
        (0, 67) => 809736749749,
        (0, 68) => 1229368413225,
        (0, 69) => 1868593299929,
        (0, 70) => 2836699741490,
        (0, 71) => 4309440263048,
        (0, 72) => 6547241478879,
        (0, 73) => 9940362821695,
        (0, 74) => 15104984244538,
        (0, 75) => 22938365706844,
        (1, 0) => 1,
        (1, 1) => 1,
        (1, 2) => 2,
        (1, 3) => 4,
        (1, 4) => 4,
        (1, 5) => 7,
        (1, 6) => 14,
        (1, 7) => 16,
        (1, 8) => 20,
        (1, 9) => 39,
        (1, 10) => 62,
        (1, 11) => 81,
        (1, 12) => 110,
        (1, 13) => 200,
        (1, 14) => 328,
        (1, 15) => 418,
        (1, 16) => 667,
        (1, 17) => 1059,
        (1, 18) => 1546,
        (1, 19) => 2377,
        (1, 20) => 3572,
        (1, 21) => 5602,
        (1, 22) => 8268,
        (1, 23) => 12343,
        (1, 24) => 19778,
        (1, 25) => 29165,
        (1, 26) => 43726,
        (1, 27) => 67724,
        (1, 28) => 102131,
        (1, 29) => 156451,
        (1, 30) => 234511,
        (1, 31) => 357632,
        (1, 32) => 549949,
        (1, 33) => 819967,
        (1, 34) => 1258125,
        (1, 35) => 1916299,
        (1, 36) => 2886408,
        (1, 37) => 4414216,
        (1, 38) => 6669768,
        (1, 39) => 10174278,
        (1, 40) => 15458147,
        (1, 41) => 23333796,
        (1, 42) => 35712308,
        (1, 43) => 54046805,
        (1, 44) => 81997335,
        (1, 45) => 125001266,
        (1, 46) => 189148778,
        (1, 47) => 288114305,
        (1, 48) => 437102505,
        (1, 49) => 663251546,
        (1, 50) => 1010392024,
        (1, 51) => 1529921658,
        (1, 52) => 2327142660,
        (1, 53) => 3537156082,
        (1, 54) => 5362947711,
        (1, 55) => 8161193535,
        (1, 56) => 12380334344,
        (1, 57) => 18810542532,
        (1, 58) => 28593873985,
        (1, 59) => 43369895096,
        (1, 60) => 65961219181,
        (1, 61) => 100139236592,
        (1, 62) => 152044639077,
        (1, 63) => 231153279853,
        (1, 64) => 350788203951,
        (1, 65) => 533109439771,
        (1, 66) => 809736749749,
        (1, 67) => 1229368413225,
        (1, 68) => 1868593299929,
        (1, 69) => 2836699741490,
        (1, 70) => 4309440263048,
        (1, 71) => 6547241478879,
        (1, 72) => 9940362821695,
        (1, 73) => 15104984244538,
        (1, 74) => 22938365706844,
        (1, 75) => 34840149002654,
        (2, 0) => 1,
        (2, 1) => 1,
        (2, 2) => 2,
        (2, 3) => 4,
        (2, 4) => 4,
        (2, 5) => 6,
        (2, 6) => 12,
        (2, 7) => 16,
        (2, 8) => 19,
        (2, 9) => 30,
        (2, 10) => 57,
        (2, 11) => 92,
        (2, 12) => 111,
        (2, 13) => 181,
        (2, 14) => 295,
        (2, 15) => 414,
        (2, 16) => 661,
        (2, 17) => 977,
        (2, 18) => 1501,
        (2, 19) => 2270,
        (2, 20) => 3381,
        (2, 21) => 5463,
        (2, 22) => 7921,
        (2, 23) => 11819,
        (2, 24) => 18712,
        (2, 25) => 27842,
        (2, 26) => 42646,
        (2, 27) => 64275,
        (2, 28) => 97328,
        (2, 29) => 150678,
        (2, 30) => 223730,
        (2, 31) => 343711,
        (2, 32) => 525238,
        (2, 33) => 784952,
        (2, 34) => 1208065,
        (2, 35) => 1824910,
        (2, 36) => 2774273,
        (2, 37) => 4230422,
        (2, 38) => 6365293,
        (2, 39) => 9763578,
        (2, 40) => 14777945,
        (2, 41) => 22365694,
        (2, 42) => 34205743,
        (2, 43) => 51643260,
        (2, 44) => 78678894,
        (2, 45) => 119550250,
        (2, 46) => 181040219,
        (2, 47) => 276213919,
        (2, 48) => 417940971,
        (2, 49) => 635526775,
        (2, 50) => 967190364,
        (2, 51) => 1464254721,
        (2, 52) => 2230181584,
        (2, 53) => 3383369064,
        (2, 54) => 5136784035,
        (2, 55) => 7815929513,
        (2, 56) => 11846276236,
        (2, 57) => 18021119171,
        (2, 58) => 27366673929,
        (2, 59) => 41525589303,
        (2, 60) => 63172165494,
        (2, 61) => 95834918754,
        (2, 62) => 145631430697,
        (2, 63) => 221285376505,
        (2, 64) => 335810508406,
        (2, 65) => 510578405753,
        (2, 66) => 775057917791,
        (2, 67) => 1177233081218,
        (2, 68) => 1789105460648,
        (2, 69) => 2715548351448,
        (2, 70) => 4126944742410,
        (2, 71) => 6267603928109,
        (2, 72) => 9517722204783,
        (2, 73) => 14463411318409,
        (2, 74) => 21959000077642,
        (2, 75) => 33361879939123,
        (3, 0) => 1,
        (3, 1) => 1,
        (3, 2) => 2,
        (3, 3) => 4,
        (3, 4) => 4,
        (3, 5) => 5,
        (3, 6) => 10,
        (3, 7) => 16,
        (3, 8) => 26,
        (3, 9) => 35,
        (3, 10) => 52,
        (3, 11) => 79,
        (3, 12) => 114,
        (3, 13) => 202,
        (3, 14) => 294,
        (3, 15) => 401,
        (3, 16) => 642,
        (3, 17) => 987,
        (3, 18) => 1556,
        (3, 19) => 2281,
        (3, 20) => 3347,
        (3, 21) => 5360,
        (3, 22) => 7914,
        (3, 23) => 12116,
        (3, 24) => 18714,
        (3, 25) => 27569,
        (3, 26) => 42628,
        (3, 27) => 64379,
        (3, 28) => 98160,
        (3, 29) => 150493,
        (3, 30) => 223231,
        (3, 31) => 344595,
        (3, 32) => 524150,
        (3, 33) => 788590,
        (3, 34) => 1210782,
        (3, 35) => 1821382,
        (3, 36) => 2779243,
        (3, 37) => 4230598,
        (3, 38) => 6382031,
        (3, 39) => 9778305,
        (3, 40) => 14761601,
        (3, 41) => 22417792,
        (3, 42) => 34225846,
        (3, 43) => 51690137,
        (3, 44) => 78827911,
        (3, 45) => 119542610,
        (3, 46) => 181315830,
        (3, 47) => 276460158,
        (3, 48) => 418258991,
        (3, 49) => 636641443,
        (3, 50) => 967436144,
        (3, 51) => 1466002423,
        (3, 52) => 2232993017,
        (3, 53) => 3385449247,
        (3, 54) => 5144151283,
        (3, 55) => 7821403715,
        (3, 56) => 11858275227,
        (3, 57) => 18043579638,
        (3, 58) => 27385205762,
        (3, 59) => 41578776877,
        (3, 60) => 63230023120,
        (3, 61) => 95919165597,
        (3, 62) => 145810654517,
        (3, 63) => 221464625286,
        (3, 64) => 336184217342,
        (3, 65) => 511098463417,
        (3, 66) => 775739293861,
        (3, 67) => 1178609585462,
        (3, 68) => 1790704917622,
        (3, 69) => 2718330612121,
        (3, 70) => 4131363673883,
        (3, 71) => 6273232027849,
        (3, 72) => 9528181900890,
        (3, 73) => 14477384086838,
        (3, 74) => 21980614313123,
        (3, 75) => 33397574184836,
        (4, 0) => 1,
        (4, 1) => 1,
        (4, 2) => 2,
        (4, 3) => 4,
        (4, 4) => 4,
        (4, 5) => 4,
        (4, 6) => 8,
        (4, 7) => 16,
        (4, 8) => 27,
        (4, 9) => 30,
        (4, 10) => 47,
        (4, 11) => 82,
        (4, 12) => 115,
        (4, 13) => 195,
        (4, 14) => 269,
        (4, 15) => 390,
        (4, 16) => 637,
        (4, 17) => 951,
        (4, 18) => 1541,
        (4, 19) => 2182,
        (4, 20) => 3204,
        (4, 21) => 5280,
        (4, 22) => 7721,
        (4, 23) => 11820,
        (4, 24) => 17957,
        (4, 25) => 26669,
        (4, 26) => 41994,
        (4, 27) => 62235,
        (4, 28) => 95252,
        (4, 29) => 146462,
        (4, 30) => 216056,
        (4, 31) => 336192,
        (4, 32) => 508191,
        (4, 33) => 766555,
        (4, 34) => 1178119,
        (4, 35) => 1761823,
        (4, 36) => 2709433,
        (4, 37) => 4110895,
        (4, 38) => 6188994,
        (4, 39) => 9515384,
        (4, 40) => 14316637,
        (4, 41) => 21807800,
        (4, 42) => 33255984,
        (4, 43) => 50149950,
        (4, 44) => 76709712,
        (4, 45) => 116004670,
        (4, 46) => 176169842,
        (4, 47) => 268815408,
        (4, 48) => 405925411,
        (4, 49) => 618986605,
        (4, 50) => 939523808,
        (4, 51) => 1424046245,
        (4, 52) => 2170908709,
        (4, 53) => 3286453556,
        (4, 54) => 4999818380,
        (4, 55) => 7599067248,
        (4, 56) => 11516149089,
        (4, 57) => 17538646495,
        (4, 58) => 26595346202,
        (4, 59) => 40399586486,
        (4, 60) => 61439053769,
        (4, 61) => 93157147262,
        (4, 62) => 141707341785,
        (4, 63) => 215121357662,
        (4, 64) => 326594116560,
        (4, 65) => 496648284472,
        (4, 66) => 753474466137,
        (4, 67) => 1145237350863,
        (4, 68) => 1739662144358,
        (4, 69) => 2640672818870,
        (4, 70) => 4014395018228,
        (4, 71) => 6093717587578,
        (4, 72) => 9257463114209,
        (4, 73) => 14065709226166,
        (4, 74) => 21352521089525,
        (4, 75) => 32450231489345,
        (5, 0) => 1,
        (5, 1) => 1,
        (5, 2) => 1,
        (5, 3) => 2,
        (5, 4) => 4,
        (5, 5) => 8,
        (5, 6) => 8,
        (5, 7) => 11,
        (5, 8) => 22,
        (5, 9) => 32,
        (5, 10) => 45,
        (5, 11) => 67,
        (5, 12) => 109,
        (5, 13) => 163,
        (5, 14) => 223,
        (5, 15) => 383,
        (5, 16) => 597,
        (5, 17) => 808,
        (5, 18) => 1260,
        (5, 19) => 1976,
        (5, 20) => 3053,
        (5, 21) => 4529,
        (5, 22) => 6675,
        (5, 23) => 10627,
        (5, 24) => 15847,
        (5, 25) => 23822,
        (5, 26) => 37090,
        (5, 27) => 55161,
        (5, 28) => 84208,
        (5, 29) => 128121,
        (5, 30) => 194545,
        (5, 31) => 298191,
        (5, 32) => 444839,
        (5, 33) => 681805,
        (5, 34) => 1042629,
        (5, 35) => 1565585,
        (5, 36) => 2396146,
        (5, 37) => 3626619,
        (5, 38) => 5509999,
        (5, 39) => 8396834,
        (5, 40) => 12678459,
        (5, 41) => 19375816,
        (5, 42) => 29353796,
        (5, 43) => 44468482,
        (5, 44) => 67897697,
        (5, 45) => 102728207,
        (5, 46) => 156270923,
        (5, 47) => 237448520,
        (5, 48) => 359945119,
        (5, 49) => 548404180,
        (5, 50) => 830902728,
        (5, 51) => 1262810287,
        (5, 52) => 1920773112,
        (5, 53) => 2910904745,
        (5, 54) => 4429562772,
        (5, 55) => 6723617334,
        (5, 56) => 10208238298,
        (5, 57) => 15523686504,
        (5, 58) => 23546156396,
        (5, 59) => 35800677601,
        (5, 60) => 54373596862,
        (5, 61) => 82527381401,
        (5, 62) => 125485168005,
        (5, 63) => 190450830578,
        (5, 64) => 289353664282,
        (5, 65) => 439635296562,
        (5, 66) => 667354407235,
        (5, 67) => 1014322133136,
        (5, 68) => 1540093078996,
        (5, 69) => 2339196397813,
        (5, 70) => 3554443567139,
        (5, 71) => 5396279119470,
        (5, 72) => 8199376885602,
        (5, 73) => 12453343570608,
        (5, 74) => 18912305922966,
        (5, 75) => 28735448607417,
        (6, 0) => 1,
        (6, 1) => 1,
        (6, 2) => 1,
        (6, 3) => 2,
        (6, 4) => 4,
        (6, 5) => 8,
        (6, 6) => 8,
        (6, 7) => 11,
        (6, 8) => 22,
        (6, 9) => 32,
        (6, 10) => 54,
        (6, 11) => 68,
        (6, 12) => 103,
        (6, 13) => 183,
        (6, 14) => 250,
        (6, 15) => 401,
        (6, 16) => 600,
        (6, 17) => 871,
        (6, 18) => 1431,
        (6, 19) => 2033,
        (6, 20) => 3193,
        (6, 21) => 4917,
        (6, 22) => 7052,
        (6, 23) => 11371,
        (6, 24) => 16815,
        (6, 25) => 25469,
        (6, 26) => 39648,
        (6, 27) => 57976,
        (6, 28) => 90871,
        (6, 29) => 136703,
        (6, 30) => 205157,
        (6, 31) => 319620,
        (6, 32) => 473117,
        (6, 33) => 727905,
        (6, 34) => 1110359,
        (6, 35) => 1661899,
        (6, 36) => 2567855,
        (6, 37) => 3849988,
        (6, 38) => 5866379,
        (6, 39) => 8978479,
        (6, 40) => 13464170,
        (6, 41) => 20675981,
        (6, 42) => 31260715,
        (6, 43) => 47355277,
        (6, 44) => 72483044,
        (6, 45) => 109181845,
        (6, 46) => 166707433,
        (6, 47) => 253134047,
        (6, 48) => 382914632,
        (6, 49) => 585166040,
        (6, 50) => 884539345,
        (6, 51) => 1345613788,
        (6, 52) => 2047645435,
        (6, 53) => 3098356892,
        (6, 54) => 4724206377,
        (6, 55) => 7160643536,
        (6, 56) => 10872985370,
        (6, 57) => 16552155417,
        (6, 58) => 25070272242,
        (6, 59) => 38158143567,
        (6, 60) => 57933790448,
        (6, 61) => 87899668107,
        (6, 62) => 133766380622,
        (6, 63) => 202834276931,
        (6, 64) => 308334249199,
        (6, 65) => 468500329699,
        (6, 66) => 710790290058,
        (6, 67) => 1081062428072,
        (6, 68) => 1640664018003,
        (6, 69) => 2492210120859,
        (6, 70) => 3787836798694,
        (6, 71) => 5748162028732,
        (6, 72) => 8737608441604,
        (6, 73) => 13268147991514,
        (6, 74) => 20148203460634,
        (6, 75) => 30621612661601,
        (7, 0) => 1,
        (7, 1) => 1,
        (7, 2) => 1,
        (7, 3) => 2,
        (7, 4) => 4,
        (7, 5) => 8,
        (7, 6) => 8,
        (7, 7) => 11,
        (7, 8) => 22,
        (7, 9) => 32,
        (7, 10) => 52,
        (7, 11) => 72,
        (7, 12) => 106,
        (7, 13) => 168,
        (7, 14) => 242,
        (7, 15) => 413,
        (7, 16) => 602,
        (7, 17) => 832,
        (7, 18) => 1369,
        (7, 19) => 2065,
        (7, 20) => 3165,
        (7, 21) => 4762,
        (7, 22) => 6994,
        (7, 23) => 11170,
        (7, 24) => 16509,
        (7, 25) => 25071,
        (7, 26) => 39034,
        (7, 27) => 57254,
        (7, 28) => 88672,
        (7, 29) => 134638,
        (7, 30) => 203252,
        (7, 31) => 312940,
        (7, 32) => 465395,
        (7, 33) => 716437,
        (7, 34) => 1092207,
        (7, 35) => 1637097,
        (7, 36) => 2519878,
        (7, 37) => 3794783,
        (7, 38) => 5771904,
        (7, 39) => 8814021,
        (7, 40) => 13273744,
        (7, 41) => 20328089,
        (7, 42) => 30742356,
        (7, 43) => 46604985,
        (7, 44) => 71251415,
        (7, 45) => 107529561,
        (7, 46) => 163892525,
        (7, 47) => 248939400,
        (7, 48) => 377032515,
        (7, 49) => 575197697,
        (7, 50) => 870467992,
        (7, 51) => 1323890750,
        (7, 52) => 2013655038,
        (7, 53) => 3049406611,
        (7, 54) => 4645433144,
        (7, 55) => 7045685002,
        (7, 56) => 10698321736,
        (7, 57) => 16276414188,
        (7, 58) => 24671676894,
        (7, 59) => 37533047662,
        (7, 60) => 56988774248,
        (7, 61) => 86488411300,
        (7, 62) => 131561415506,
        (7, 63) => 199575001348,
        (7, 64) => 303311548004,
        (7, 65) => 460837978219,
        (7, 66) => 699372964501,
        (7, 67) => 1063331414844,
        (7, 68) => 1614094135973,
        (7, 69) => 2451830128654,
        (7, 70) => 3725902804244,
        (7, 71) => 5655408093234,
        (7, 72) => 8595002059570,
        (7, 73) => 13052617650290,
        (7, 74) => 19822054252432,
        (7, 75) => 30121450842288,
        (8, 0) => 1,
        (8, 1) => 1,
        (8, 2) => 1,
        (8, 3) => 2,
        (8, 4) => 4,
        (8, 5) => 7,
        (8, 6) => 7,
        (8, 7) => 11,
        (8, 8) => 22,
        (8, 9) => 31,
        (8, 10) => 48,
        (8, 11) => 69,
        (8, 12) => 103,
        (8, 13) => 161,
        (8, 14) => 239,
        (8, 15) => 393,
        (8, 16) => 578,
        (8, 17) => 812,
        (8, 18) => 1322,
        (8, 19) => 2011,
        (8, 20) => 3034,
        (8, 21) => 4580,
        (8, 22) => 6798,
        (8, 23) => 10738,
        (8, 24) => 16018,
        (8, 25) => 24212,
        (8, 26) => 37525,
        (8, 27) => 55534,
        (8, 28) => 85483,
        (8, 29) => 130183,
        (8, 30) => 196389,
        (8, 31) => 301170,
        (8, 32) => 450896,
        (8, 33) => 691214,
        (8, 34) => 1054217,
        (8, 35) => 1583522,
        (8, 36) => 2428413,
        (8, 37) => 3669747,
        (8, 38) => 5573490,
        (8, 39) => 8505207,
        (8, 40) => 12835708,
        (8, 41) => 19605147,
        (8, 42) => 29704486,
        (8, 43) => 45028011,
        (8, 44) => 68747690,
        (8, 45) => 103934296,
        (8, 46) => 158185825,
        (8, 47) => 240410770,
        (8, 48) => 364289594,
        (8, 49) => 555105869,
        (8, 50) => 841069902,
        (8, 51) => 1278299521,
        (8, 52) => 1944190437,
        (8, 53) => 2946226464,
        (8, 54) => 4484326329,
        (8, 55) => 6805591722,
        (8, 56) => 10332097590,
        (8, 57) => 15714538160,
        (8, 58) => 23833683818,
        (8, 59) => 36238383740,
        (8, 60) => 55037373871,
        (8, 61) => 83534994701,
        (8, 62) => 127024485591,
        (8, 63) => 192770563390,
        (8, 64) => 292891568245,
        (8, 65) => 445020687753,
        (8, 66) => 675489979403,
        (8, 67) => 1026733290935,
        (8, 68) => 1558911226168,
        (8, 69) => 2367783267114,
        (8, 70) => 3597921540463,
        (8, 71) => 5462124639438,
        (8, 72) => 8299712231826,
        (8, 73) => 12605551395981,
        (8, 74) => 19143219233647,
        (8, 75) => 29087020205323,
        (9, 0) => 1,
        (9, 1) => 1,
        (9, 2) => 1,
        (9, 3) => 2,
        (9, 4) => 4,
        (9, 5) => 8,
        (9, 6) => 8,
        (9, 7) => 11,
        (9, 8) => 22,
        (9, 9) => 32,
        (9, 10) => 54,
        (9, 11) => 70,
        (9, 12) => 103,
        (9, 13) => 183,
        (9, 14) => 262,
        (9, 15) => 419,
        (9, 16) => 586,
        (9, 17) => 854,
        (9, 18) => 1468,
        (9, 19) => 2131,
        (9, 20) => 3216,
        (9, 21) => 4888,
        (9, 22) => 7217,
        (9, 23) => 11617,
        (9, 24) => 17059,
        (9, 25) => 25793,
        (9, 26) => 40124,
        (9, 27) => 58820,
        (9, 28) => 92114,
        (9, 29) => 139174,
        (9, 30) => 208558,
        (9, 31) => 322818,
        (9, 32) => 480178,
        (9, 33) => 740365,
        (9, 34) => 1126352,
        (9, 35) => 1685448,
        (9, 36) => 2602817,
        (9, 37) => 3910494,
        (9, 38) => 5953715,
        (9, 39) => 9102530,
        (9, 40) => 13675794,
        (9, 41) => 20970437,
        (9, 42) => 31705673,
        (9, 43) => 48074246,
        (9, 44) => 73537869,
        (9, 45) => 110811935,
        (9, 46) => 169092081,
        (9, 47) => 256830213,
        (9, 48) => 388727714,
        (9, 49) => 593534295,
        (9, 50) => 897592763,
        (9, 51) => 1365513047,
        (9, 52) => 2077309718,
        (9, 53) => 3144423073,
        (9, 54) => 4792957707,
        (9, 55) => 7266163233,
        (9, 56) => 11033309991,
        (9, 57) => 16792025848,
        (9, 58) => 25442648670,
        (9, 59) => 38716940493,
        (9, 60) => 58780298247,
        (9, 61) => 89198234571,
        (9, 62) => 135718181667,
        (9, 63) => 205824986739,
        (9, 64) => 312858253566,
        (9, 65) => 475352922955,
        (9, 66) => 721283109638,
        (9, 67) => 1096862549472,
        (9, 68) => 1664773930182,
        (9, 69) => 2528876426307,
        (9, 70) => 3843251145519,
        (9, 71) => 5832794158307,
        (9, 72) => 8865669337036,
        (9, 73) => 13462884780433,
        (9, 74) => 20444566374734,
        (9, 75) => 31069966778992,
        _ => unsafe { unreachable_unchecked() },
        // _ => unreachable!(),
    }
}
